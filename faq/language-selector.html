<div id="language-selector" class="language-dropdown" style="display: none;">
  <input type="text" id="language-search" placeholder="Search languages..." autocomplete="off">
  <div class="language-list">
    <a href="/en-gb/" class="language-option" data-lang="en-gb">ğŸ‡¬ğŸ‡§ English</a>
    <a href="/fr-fr/" class="language-option" data-lang="fr-fr">ğŸ‡«ğŸ‡· FranÃ§ais</a>
    <a href="/es-es/" class="language-option" data-lang="es-es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</a>
    <a href="/de-de/" class="language-option" data-lang="de-de">ğŸ‡©ğŸ‡ª Deutsch</a>
    <a href="/it-it/" class="language-option" data-lang="it-it">ğŸ‡®ğŸ‡¹ Italiano</a>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const trigger = document.getElementById('language-selector-trigger');
  const dropdown = document.getElementById('language-selector');
  const search = document.getElementById('language-search');
  const options = document.querySelectorAll('.language-option');
  
  if (!trigger || !dropdown) return;
  
  // Position dropdown relative to trigger
  trigger.addEventListener('click', function(e) {
    e.preventDefault();
    e.stopPropagation();
    
    if (dropdown.style.display === 'none' || !dropdown.style.display) {
      // Position the dropdown below the trigger
      const rect = trigger.getBoundingClientRect();
      dropdown.style.display = 'block';
      dropdown.style.position = 'absolute';
      dropdown.style.top = (rect.bottom + window.scrollY) + 'px';
      dropdown.style.left = rect.left + 'px';
      search.focus();
    } else {
      dropdown.style.display = 'none';
    }
  });
  
  search.addEventListener('input', function() {
    const query = this.value.toLowerCase();
    options.forEach(opt => {
      const text = opt.textContent.toLowerCase();
      opt.style.display = text.includes(query) ? 'block' : 'none';
    });
  });
  
  document.addEventListener('click', function(e) {
    if (!trigger.contains(e.target) && !dropdown.contains(e.target)) {
      dropdown.style.display = 'none';
    }
  });
  
  const currentPath = window.location.pathname;
  const currentLang = currentPath.split('/')[1];
  options.forEach(opt => {
    if (opt.dataset.lang === currentLang) {
      opt.classList.add('active');
    }
  });
});
</script>
